<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="koing.kosta180.mapper.MemberMapper">

	<select id="getTime" resultType="string">
		select sysdate from dual
	</select>

	<!-- 회원가입 -->
	<insert id="insertMember" parameterType="MemberVO">
		insert into Member(
		id,
		pw, m_name, m_gender, m_ssno, m_pno, m_address, m_agree
		) values(
		#{id},#{pw},#{m_name},#{m_gender},#{m_ssno},#{m_pno},#{m_address},#{m_agree}
		)
	</insert>

	<!-- 로그인 시 id와pw 비교를 위한 쿼리문 -->
	<select id="loginSelect" parameterType="String" resultType="String">
		select pw from member where id = #{id}
	</select>

	<!-- 로그인 성공 후 DB에서 회원정보를 가져오는 쿼리문 -->
	<select id="loginMember" parameterType="String" resultType="MemberVO">
		select * from member where id = #{id}
	</select>

	<!-- 회원가입 시 아이디 중복 확인 -->
	<select id="idCheck" parameterType="String" resultType="Integer">
		select
		count(*) from member group by id having id = #{id}
	</select>

	<!-- 회원정보 수정 -->
	<update id="updateMember" parameterType="MemberVO">
		update member
		set pw =#{pw}, m_name = #{m_name}, m_pno = #{m_pno}, m_address = #{m_address}, m_agree = #{m_agree}
		where id = #{id}
	</update>


</mapper>